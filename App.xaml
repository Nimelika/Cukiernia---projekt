<Application
    x:Class="DesktopApp.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:authVM="clr-namespace:DesktopApp.ViewModels.AccessAdminViewModels.AuthorizationViewModels"
    xmlns:authViews="clr-namespace:DesktopApp.Views.AccessAdminViews"
    xmlns:helpers="clr-namespace:DesktopApp.Helpers"
    xmlns:local="clr-namespace:DesktopApp"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:moduleVM="clr-namespace:DesktopApp.ViewModels.AccessAdminViewModels.ModulesViewModels"
    xmlns:moduleViews="clr-namespace:DesktopApp.Views.AccessAdminViews.ModulesViews">
    <Application.Resources>
        <ResourceDictionary>



            <ResourceDictionary.MergedDictionaries>


                <materialDesign:BundledTheme
                    BaseTheme="Light"
                    PrimaryColor="BlueGrey"
                    SecondaryColor="Indigo" />

                <ResourceDictionary Source="pack://application:,,,/MaterialDesignThemes.Wpf;component/Themes/MaterialDesign3.Defaults.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Primary/MaterialDesignColor.BlueGrey.xaml" />
                <ResourceDictionary Source="pack://application:,,,/MaterialDesignColors;component/Themes/Recommended/Secondary/MaterialDesignColor.Indigo.xaml" />

            </ResourceDictionary.MergedDictionaries>

            <helpers:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
            <helpers:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter" />


            <DataTemplate DataType="{x:Type authVM:LoginViewModel}">
                <authViews:LoginView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type moduleVM:HomeViewModel}">
                <moduleViews:HomeView />
            </DataTemplate>
            <DataTemplate DataType="{x:Type moduleVM:ProductsViewModel}">
                <moduleViews:ProductsView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type moduleVM:ProductionViewModel}">
                <moduleViews:ProductionView />
            </DataTemplate>

            <DataTemplate DataType="{x:Type moduleVM:SettingsViewModel}">
                <moduleViews:SettingsView />
            </DataTemplate>



            <SolidColorBrush x:Key="MaterialDesign.Brush.Background" Color="#FFF5F5F5" />
            <SolidColorBrush x:Key="MaterialDesign.Brush.Paper" Color="#FFF5F5F5" />
            <SolidColorBrush x:Key="MaterialDesign.Brush.CardBackground" Color="#FFF5F5F5" />


            <Style TargetType="DataGridCell">
                <Setter Property="Background" Value="{DynamicResource MaterialDesign.Brush.Paper}" />
                <Setter Property="Foreground" Value="{DynamicResource MaterialDesign.Brush.Body}" />

                <Style.Triggers>

                    <Trigger Property="IsEditing" Value="True">
                        <Setter Property="Background" Value="{DynamicResource MaterialDesign.Brush.Paper}" />
                        <Setter Property="Foreground" Value="{DynamicResource MaterialDesign.Brush.Body}" />
                    </Trigger>


                    <Trigger Property="IsSelected" Value="True">
                        <Setter Property="Background" Value="{DynamicResource MaterialDesign.Brush.PrimaryContainer}" />
                        <Setter Property="Foreground" Value="{DynamicResource MaterialDesign.Brush.OnPrimaryContainer}" />
                    </Trigger>
                </Style.Triggers>
            </Style>


            <Style TargetType="DataGridRow">
                <Setter Property="Background" Value="{DynamicResource MaterialDesign.Brush.Paper}" />
            </Style>



            <Style x:Key="DataGridTextBoxStyle" TargetType="TextBox">
                <Setter Property="Background" Value="{DynamicResource MaterialDesign.Brush.Paper}" />
                <Setter Property="Foreground" Value="{DynamicResource MaterialDesign.Brush.Body}" />
                <Setter Property="BorderBrush" Value="{DynamicResource MaterialDesign.Brush.Divider}" />
            </Style>

            <Style x:Key="DataGridDisplayTextBlock" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{DynamicResource MaterialDesign.Brush.Body}" />
                <Setter Property="VerticalAlignment" Value="Center" />
            </Style>

            <Style x:Key="DataGridEditingTextBox" TargetType="TextBox">
                <Setter Property="Background" Value="{DynamicResource MaterialDesign.Brush.Paper}" />
                <Setter Property="Foreground" Value="{DynamicResource MaterialDesign.Brush.Body}" />
                <Setter Property="BorderBrush" Value="{DynamicResource MaterialDesign.Brush.Divider}" />
            </Style>

            <Style x:Key="MainHCCStyle" TargetType="{x:Type HeaderedContentControl}">
                <Setter Property="HeaderTemplate">
                    <Setter.Value>
                        <DataTemplate />
                    </Setter.Value>
                </Setter>
                <Setter Property="IsTabStop" Value="False" />
                <Setter Property="Template">
                    <Setter.Value>
                        <!--
                            This template ensures that content of a HeaderedContentControl
                            fills the available vertical space.
                        -->
                        <ControlTemplate TargetType="{x:Type HeaderedContentControl}">
                            <DockPanel>
                                <ContentPresenter
                                    ContentSource="Header"
                                    ContentTemplate="{TemplateBinding HeaderTemplate}"
                                    DockPanel.Dock="Top" />
                                <ContentPresenter ContentSource="Content" ContentTemplate="{TemplateBinding ContentTemplate}" />
                            </DockPanel>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style>





            <!--  // Menu with SubMenu Template //  -->

            <ControlTemplate x:Key="Menu_SubMenu_Template" TargetType="{x:Type MenuItem}">

                <Border
                    x:Name="border"
                    Width="270"
                    Height="50"
                    BorderThickness="0">


                    <ToolTipService.ShowOnDisabled>true</ToolTipService.ShowOnDisabled>

                    <ToolTipService.ToolTip>
                        <ToolTip Content="Access not granted" Visibility="{Binding PlacementTarget.IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource InverseBoolToVisibilityConverter}}" />
                    </ToolTipService.ToolTip>



                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Offset="0" Color="#E2DCD5" />
                            <GradientStop Offset="0.5" Color="#F9F3E6" />
                            <GradientStop Offset="1" Color="#E2DCD5" />
                        </LinearGradientBrush>
                    </Border.Background>


                    <Grid>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="22" />
                            <ColumnDefinition Width="13" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="30" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="20" />
                        </Grid.ColumnDefinitions>

                        <!--  // Icon //  -->

                        <ContentPresenter
                            x:Name="Icon"
                            Width="35"
                            Height="35"
                            Margin="10,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            ContentSource="Icon" />

                        <!--  // Menu Text //  -->

                        <ContentPresenter
                            x:Name="HeaderPresenter"
                            Grid.Column="2"
                            Margin="3,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            ContentSource="Header"
                            RecognizesAccessKey="True"
                            TextBlock.FontFamily="Calibri"
                            TextBlock.FontSize="22"
                            TextBlock.Foreground="#393E46" />

                        <!--  // Right Arrow Icon //  -->

                        <Image
                            Grid.Column="4"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            Source="Assets/img_arrow.png"
                            Stretch="None" />

                        <!--  // Popup //  -->

                        <Popup
                            x:Name="PART_Popup"
                            AllowsTransparency="true"
                            Focusable="false"
                            HorizontalOffset="-2"
                            IsOpen="{Binding IsSubmenuOpen, RelativeSource={RelativeSource TemplatedParent}}"
                            Placement="Right"
                            PopupAnimation="{DynamicResource {x:Static SystemParameters.MenuPopupAnimationKey}}"
                            VerticalOffset="0">

                            <Border x:Name="SubMenuBorder">

                                <Border.Background>
                                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                        <GradientStop Offset="0" Color="#E2DCD5" />
                                        <GradientStop Offset="0.5" Color="#F9F3E6" />
                                        <GradientStop Offset="1" Color="#E2DCD5" />
                                    </LinearGradientBrush>
                                </Border.Background>

                                <ScrollViewer x:Name="SubMenuScrollViewer" Style="{DynamicResource {ComponentResourceKey ResourceId=MenuScrollViewer, TypeInTargetAssembly={x:Type FrameworkElement}}}">

                                    <Grid RenderOptions.ClearTypeHint="Enabled">

                                        <Canvas HorizontalAlignment="Left" VerticalAlignment="Top" />

                                        <ItemsPresenter
                                            x:Name="ItemsPresenter"
                                            Grid.IsSharedSizeScope="true"
                                            KeyboardNavigation.DirectionalNavigation="Cycle"
                                            KeyboardNavigation.TabNavigation="Cycle" />
                                    </Grid>
                                </ScrollViewer>
                            </Border>
                        </Popup>

                    </Grid>
                </Border>


                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="border" Property="Opacity" Value="0.4" />
                        <Setter TargetName="HeaderPresenter" Property="TextBlock.Foreground" Value="#9E9E9E" />
                    </Trigger>


                    <Trigger Property="IsSuspendingPopupAnimation" Value="true">
                        <Setter TargetName="PART_Popup" Property="PopupAnimation" Value="None" />
                    </Trigger>

                    <Trigger Property="Icon" Value="{x:Null}">
                        <Setter TargetName="Icon" Property="Visibility" Value="Visible" />
                    </Trigger>

                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="Icon" Property="Visibility" Value="Visible" />
                    </Trigger>

                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="border" Property="Background" Value="#607D8B" />
                        <Setter TargetName="border" Property="BorderBrush" Value="#607D8B" />
                        <!--  Zmiana koloru tekstu  -->
                        <Setter TargetName="HeaderPresenter" Property="TextBlock.Foreground" Value="White" />

                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>

            <!--  // Main Menu Template //  -->

            <ControlTemplate x:Key="Menu_Template" TargetType="{x:Type MenuItem}">

                <Border
                    x:Name="border"
                    Width="270"
                    Height="50"
                    BorderThickness="0">
                    <ToolTipService.ShowOnDisabled>true</ToolTipService.ShowOnDisabled>

                    <ToolTipService.ToolTip>
                        <ToolTip Content="Access not granted" Visibility="{Binding PlacementTarget.IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource InverseBoolToVisibilityConverter}}" />
                    </ToolTipService.ToolTip>





                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Offset="0" Color="#E2DCD5" />
                            <GradientStop Offset="0.5" Color="#F9F3E6" />
                            <GradientStop Offset="1" Color="#E2DCD5" />
                        </LinearGradientBrush>
                    </Border.Background>

                    <Grid>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="22" />
                            <ColumnDefinition Width="13" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="30" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="20" />
                        </Grid.ColumnDefinitions>

                        <!--  // Icon //  -->

                        <ContentPresenter
                            x:Name="Icon"
                            Width="35"
                            Height="35"
                            Margin="10,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            ContentSource="Icon" />

                        <!--  // Menu Text //  -->

                        <ContentPresenter
                            x:Name="HeaderPresenter"
                            Grid.Column="2"
                            Margin="3,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            ContentSource="Header"
                            RecognizesAccessKey="True"
                            TextBlock.FontFamily="Calibri"
                            TextBlock.FontSize="22"
                            TextBlock.Foreground="#393E46" />

                    </Grid>
                </Border>


                <ControlTemplate.Triggers>

                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="border" Property="Opacity" Value="0.4" />
                        <Setter TargetName="HeaderPresenter" Property="TextBlock.Foreground" Value="#9E9E9E" />
                    </Trigger>


                    <Trigger Property="Icon" Value="{x:Null}">
                        <Setter TargetName="Icon" Property="Visibility" Value="Visible" />
                    </Trigger>

                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="Icon" Property="Visibility" Value="Visible" />
                    </Trigger>

                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="border" Property="Background" Value="#607D8B" />
                        <Setter TargetName="border" Property="BorderBrush" Value="#607D8B" />
                        <!--  Zmiana koloru tekstu  -->
                        <Setter TargetName="HeaderPresenter" Property="TextBlock.Foreground" Value="White" />
                    </Trigger>


                </ControlTemplate.Triggers>
            </ControlTemplate>

            <!--  // Menu Item Template //  -->

            <ControlTemplate x:Key="Item_Template" TargetType="{x:Type MenuItem}">

                <Border
                    x:Name="border"
                    Width="270"
                    Height="50"
                    BorderThickness="{TemplateBinding BorderThickness}">


                    <ToolTipService.ShowOnDisabled>true</ToolTipService.ShowOnDisabled>

                    <ToolTipService.ToolTip>
                        <ToolTip Content="Access not granted" Visibility="{Binding PlacementTarget.IsEnabled, RelativeSource={RelativeSource Self}, Converter={StaticResource InverseBoolToVisibilityConverter}}" />
                    </ToolTipService.ToolTip>





                    <Border.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Offset="0" Color="#E2DCD5" />
                            <GradientStop Offset="0.5" Color="#F9F3E6" />
                            <GradientStop Offset="1" Color="#E2DCD5" />
                        </LinearGradientBrush>
                    </Border.Background>

                    <Grid>

                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" MinWidth="22" />
                            <ColumnDefinition Width="13" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="30" />
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="20" />
                        </Grid.ColumnDefinitions>

                        <!--  // Icon //  -->

                        <ContentPresenter
                            x:Name="Icon"
                            Width="35"
                            Height="35"
                            Margin="10,0,0,0"
                            HorizontalAlignment="Center"
                            VerticalAlignment="Center"
                            ContentSource="Icon" />

                        <!--  // Menu Text //  -->

                        <ContentPresenter
                            x:Name="HeaderPresenter"
                            Grid.Column="2"
                            Margin="3,0,0,0"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            ContentSource="Header"
                            RecognizesAccessKey="True"
                            TextBlock.FontFamily="Calibri"
                            TextBlock.FontSize="22"
                            TextBlock.Foreground="#393E46" />


                    </Grid>
                </Border>


                <ControlTemplate.Triggers>

                    <Trigger Property="IsEnabled" Value="False">
                        <Setter TargetName="border" Property="Opacity" Value="0.4" />
                        <Setter TargetName="HeaderPresenter" Property="TextBlock.Foreground" Value="#9E9E9E" />
                    </Trigger>


                    <Trigger Property="Icon" Value="{x:Null}">
                        <Setter TargetName="Icon" Property="Visibility" Value="Visible" />
                    </Trigger>

                    <Trigger Property="IsChecked" Value="True">
                        <Setter TargetName="Icon" Property="Visibility" Value="Visible" />
                    </Trigger>

                    <Trigger Property="IsHighlighted" Value="True">
                        <Setter TargetName="border" Property="Background" Value="#607D8B" />
                        <Setter TargetName="border" Property="BorderBrush" Value="#607D8B" />
                        <!--  Zmiana koloru tekstu  -->
                        <Setter TargetName="HeaderPresenter" Property="TextBlock.Foreground" Value="White" />
                    </Trigger>

                </ControlTemplate.Triggers>
            </ControlTemplate>


            <DataTemplate x:Key="ClosableTabItemTemplate">
                <DockPanel Width="200" HorizontalAlignment="Left">
                    <Button
                        Width="16"
                        Height="16"
                        Margin="0,1,0,0"
                        Padding="0"
                        VerticalContentAlignment="Center"
                        Command="{Binding Path=CloseCommand}"
                        Content="X"
                        Cursor="Hand"
                        DockPanel.Dock="Right"
                        Focusable="False"
                        FontFamily="Courier"
                        FontSize="9"
                        FontWeight="Bold" />
                    <TextBlock
                        HorizontalAlignment="Left"
                        VerticalAlignment="Center"
                        Foreground="{Binding RelativeSource={RelativeSource AncestorType=TabItem}, Path=Foreground}"
                        Text="{Binding DisplayName}" />
                </DockPanel>
            </DataTemplate>

            <!--
                This template explains how to render the 'Workspace' content area in the main window.
            -->
            <DataTemplate x:Key="WorkspacesTemplate">

                <TabControl
                    Margin="15"
                    HorizontalAlignment="Left"
                    HorizontalContentAlignment="Left"
                    IsSynchronizedWithCurrentItem="True"
                    ItemTemplate="{StaticResource ClosableTabItemTemplate}"
                    ItemsSource="{Binding}" />
            </DataTemplate>


        </ResourceDictionary>
    </Application.Resources>
</Application>
