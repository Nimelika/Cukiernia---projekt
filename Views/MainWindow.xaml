<Window
    x:Class="DesktopApp.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DesktopApp"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:viewmodels="clr-namespace:DesktopApp.ViewModels"
    Title="All Set Up for Make a Wish"
    Width="900"
    Height="700"
    Background="#F5F5F5"
    Style="{StaticResource MaterialDesignWindow}"
    WindowState="Maximized"
    mc:Ignorable="d">

    <Window.Resources>
        <ResourceDictionary Source="MainWindowResources.xaml" />
    </Window.Resources>

    <Grid>

        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="270" />
            <ColumnDefinition Width="*" />
        </Grid.ColumnDefinitions>

        <!--  LEFT MENU (widoczne tylko po loginie)  -->
        <StackPanel
            Grid.Column="0"
            Width="270"
            Background="#E2DCD5"
            Orientation="Vertical"
            Visibility="{Binding IsUserLoggedIn, Converter={StaticResource BoolToVisibilityConverter}}">

            <!--  Company Name  -->
            <Grid Height="50" Margin="0,30,0,0">
                <TextBlock
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    FontFamily="Calibri"
                    FontSize="25"
                    Foreground="#4A4947"
                    Text="MAKE A WISH" />
            </Grid>

            <!--  Side Menu  -->
            <Menu
                Height="450"
                Margin="0,40,0,0"
                Background="Transparent">

                <Menu.ItemsPanel>
                    <ItemsPanelTemplate>
                        <VirtualizingStackPanel Orientation="Vertical" />
                    </ItemsPanelTemplate>
                </Menu.ItemsPanel>

                <MenuItem Header="Home" Template="{StaticResource Menu_Template}" />

                <MenuItem Header="Products" Template="{StaticResource Menu_SubMenu_Template}">
                    <MenuItem
                        Command="{Binding AllProductCategoriesCommand}"
                        Header="Categories"
                        Template="{StaticResource Item_Template}" />
                    <MenuItem
                        Command="{Binding AllCelebrationCakesCommand}"
                        Header="Celebration Cakes"
                        Template="{StaticResource Item_Template}" />
                </MenuItem>
                

                <MenuItem Header="Stock &amp; Orders" Template="{StaticResource Menu_SubMenu_Template}">
                    <MenuItem
                        Command="{Binding AllQuoteRequestsCommand}"
                        Header="Quote Requests"
                        Template="{StaticResource Item_Template}" />
                    <MenuItem
                        Command="{Binding AllOrdersCommand}"
                        Header="Orders"
                        Template="{StaticResource Item_Template}" />
                    
                    <MenuItem
                        Command="{Binding CreateOrderItemCommand}"
                        Header="Create Order Item"
                        Template="{StaticResource Item_Template}" />
                </MenuItem>

                <MenuItem Header="Finance" Template="{StaticResource Menu_SubMenu_Template}">
                    <MenuItem
                        Command="{Binding CreateInvoiceCommand}"
                        Header="Create Invoice"
                        Template="{StaticResource Item_Template}" />
                    <MenuItem
                        Command="{Binding CreateInvoiceItemCommand}"
                        Header="Create Invoice Item"
                        Template="{StaticResource Item_Template}" />
                </MenuItem>

                <MenuItem Header="Administration" Template="{StaticResource Menu_SubMenu_Template}">
                    <MenuItem
                        Command="{Binding AllUserAccessesCommand}"
                        Header="User Access"
                        Template="{StaticResource Item_Template}" />
                    <MenuItem
                        Command="{Binding AllRegionsCommand}"
                        Header="Region"
                        Template="{StaticResource Item_Template}" />
                </MenuItem>

                <MenuItem Header="Settings" Template="{StaticResource Menu_SubMenu_Template}">
                    
                </MenuItem>

                <MenuItem
                    Command="{Binding LogoutCommand}"
                    Header="Logout"
                    Template="{StaticResource Menu_Template}" />

            </Menu>
        </StackPanel>

        <!--  CONTENT  -->
        <Grid Grid.Column="1">
            <Grid.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Offset="0" Color="#F9F3E6" />
                    <GradientStop Offset="0.5" Color="#E2DCD5" />
                </LinearGradientBrush>
            </Grid.Background>

            <!--  LOGIN VIEW  -->
            <ContentControl
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                Content="{Binding LoginViewModel}"
                Visibility="{Binding IsUserLoggedIn, Converter={StaticResource InverseBoolToVisibilityConverter}}" />

            <!--  WORKSPACES  -->
            <ContentControl
                Content="{Binding Workspaces}"
                ContentTemplate="{StaticResource WorkspacesTemplate}"
                Visibility="{Binding IsUserLoggedIn, Converter={StaticResource BoolToVisibilityConverter}}" />
        </Grid>

    </Grid>
</Window>
