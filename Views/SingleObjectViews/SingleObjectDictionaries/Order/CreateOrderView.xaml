<local:SingleViewBase
    x:Class="DesktopApp.Views.SingleObjectViews.SingleObjectDictionaries.Order.CreateOrderView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:DesktopApp.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="600"
    d:DesignWidth="900"
    mc:Ignorable="d">
   
  

        <UserControl.Resources>
            <ResourceDictionary Source="/Views/TabStyleResources.xaml" />
        </UserControl.Resources>

        <Grid Margin="10">
            <StackPanel Orientation="Vertical" Margin="10">

                <!-- GENERAL INFORMATION -->
                <Expander Header="General Information" IsExpanded="True" FontWeight="SemiBold">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Order Date:"/>
                        <DatePicker Grid.Row="0" Grid.Column="1"
                                SelectedDate="{Binding OrderDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="Collection Date:"/>
                        <DatePicker Grid.Row="1" Grid.Column="1"
                                SelectedDate="{Binding CollectionDate, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>

                        <CheckBox Grid.Row="2" Grid.Column="1"
                              Content="Is Paid"
                              IsChecked="{Binding IsPaid, Mode=TwoWay}"/>
                    </Grid>
                </Expander>

                <!-- CUSTOMER AND SHOP -->
                <Expander Header="Customer and Shop" IsExpanded="True" FontWeight="SemiBold">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Customer:"/>
                        <ComboBox Grid.Row="0" Grid.Column="1"
                              ItemsSource="{Binding CustomerComboBoxItems}"
                              DisplayMemberPath="Value"
                              SelectedValuePath="Key"
                              SelectedValue="{Binding Customer, Mode=TwoWay}"
                              Style="{StaticResource StandardComboBoxStyle}"/>

                        <Label Grid.Row="1" Grid.Column="0" Content="Shop:"/>
                        <ComboBox Grid.Row="1" Grid.Column="1"
                              ItemsSource="{Binding ShopComboBoxItems}"
                              DisplayMemberPath="Value"
                              SelectedValuePath="Key"
                              SelectedValue="{Binding Shop, Mode=TwoWay}"
                              Style="{StaticResource StandardComboBoxStyle}"/>

                        <Label Grid.Row="2" Grid.Column="0" Content="Status:"/>
                        <ComboBox Grid.Row="2" Grid.Column="1"
                              ItemsSource="{Binding StatusComboBoxItems}"
                              DisplayMemberPath="Value"
                              SelectedValuePath="Key"
                              SelectedValue="{Binding Status, Mode=TwoWay}"
                              Style="{StaticResource StandardComboBoxStyle}"/>
                    </Grid>
                </Expander>

                <!-- ORDER ITEMS -->
                <Expander Header="Order Items" IsExpanded="True" FontWeight="SemiBold">
                    <StackPanel Margin="10">

                        <Button Content="Add Order Item"
                            Command="{Binding AddOrderItemCommand}"
                            Width="150"
                            Margin="0 0 0 10"/>

                        <DataGrid ItemsSource="{Binding OrderItems}"
                              AutoGenerateColumns="False"
                              CanUserAddRows="False"
                              Height="200">

                            <!-- LOCAL STYLES (same as CreateInvoiceView) -->
                            <DataGrid.Resources>

                                <Style x:Key="DgDisplayText" TargetType="TextBlock">
                                    <Setter Property="Foreground" Value="#2D2424"/>
                                    <Setter Property="VerticalAlignment" Value="Center"/>
                                </Style>

                                <Style x:Key="DgEditText" TargetType="TextBox"
                                   BasedOn="{StaticResource MaterialDesignTextBox}">
                                    <Setter Property="Foreground" Value="#2D2424"/>
                                    <Setter Property="Background" Value="#FFF5F5F5"/>
                                    <Setter Property="CaretBrush" Value="#2D2424"/>
                                    <Setter Property="SelectionBrush" Value="#50607D8B"/>
                                    <Setter Property="BorderBrush" Value="#80666666"/>
                                </Style>

                            </DataGrid.Resources>

                            <!-- CELL STYLE -->
                            <DataGrid.CellStyle>
                                <Style TargetType="DataGridCell">
                                    <Setter Property="Background" Value="#FFF5F5F5"/>
                                    <Setter Property="Foreground" Value="#2D2424"/>

                                    <Style.Triggers>
                                        <Trigger Property="IsEditing" Value="True">
                                            <Setter Property="Background" Value="#FFF5F5F5"/>
                                            <Setter Property="Foreground" Value="#2D2424"/>
                                        </Trigger>
                                        <Trigger Property="IsSelected" Value="True">
                                            <Setter Property="Background" Value="#FFE2DCD5"/>
                                            <Setter Property="Foreground" Value="#2D2424"/>
                                        </Trigger>
                                    </Style.Triggers>
                                </Style>
                            </DataGrid.CellStyle>

                            <DataGrid.Columns>

                                <!-- CAKE NAME -->
                                <DataGridTextColumn Header="Cake"
                                                Binding="{Binding CelebrationCakeName}"
                                                ElementStyle="{StaticResource DgDisplayText}"
                                                EditingElementStyle="{StaticResource DgEditText}" />

                                <DataGridTextColumn Header="Quantity"
                                                Binding="{Binding Quantity}"
                                                ElementStyle="{StaticResource DgDisplayText}"
                                                EditingElementStyle="{StaticResource DgEditText}" />

                                <DataGridTextColumn Header="Unit Price"
                                                Binding="{Binding UnitPrice}"
                                                ElementStyle="{StaticResource DgDisplayText}"
                                                EditingElementStyle="{StaticResource DgEditText}" />

                                <DataGridTextColumn Header="Size"
                                                Binding="{Binding CelebrationCakeSizeName}"
                                                ElementStyle="{StaticResource DgDisplayText}"
                                                EditingElementStyle="{StaticResource DgEditText}" />

                                <DataGridTemplateColumn Header="Delete">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <Button Content="X"
                                                Command="{Binding DataContext.RemoveOrderItemCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                                CommandParameter="{Binding}"/>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                            </DataGrid.Columns>

                        </DataGrid>
                    </StackPanel>
                </Expander>

            </StackPanel>
        </Grid>
    </local:SingleViewBase>
